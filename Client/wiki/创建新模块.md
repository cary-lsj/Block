创建一个新模块一般有以下几个步骤：
##### 1. 创建皮肤

    在resource\skins\modules\XXX下新建XXXSkin.exml。

    exml文件中的Skin标签的`class`为 `class="gameSkin.XXXSkin"`。
   
    皮肤完成之后，编译项目，会在resource\default.thm.json的"exmls"下自动新增exml的路径。

##### 2. 创建视图类

    在src\game\modules\XXX\view下新建XXXView.ts类，即为视图类。
    命名空间统一用game 即`namespace game{}`
    类中声明在exml中定义的各控件的变量，必须与`id`值一致，并且为`public`。
    
    ```
        namespace game {
            export class MainUITopView extends eui.Component {
                public txt_info: eui.Label;
                public txt_money: eui.Label;
                public btn_addMoney: game.ScaleButton;
            }
        }
    ```

    视图类分两种，一种是模块视图，一种是普通视图，如模块视图下的子视图。
    模块视图需要继承模块视图接口`IModuleView`，如`XXXView extends eui.Component implements IModuleView{}`
    普通视图只需要`extends eui.Component`即可。

    举个栗子：
    主界面模块，主界面模块下又分为上中下左右几个视图，这时候就需要创建一个模块视图和几子视图（普通视图），MainUIView、MainUITopView、MainUILeftView等。
    ```
        //模块视图
        export class MainUIView extends eui.Component implements IModuleView {}
        //普通视图
        export class MainUITopView extends eui.Component {}
    ```


##### 3. 绑定皮肤和视图类

    视图和视图类创建好之后就可以创建他们之间的联系了，有两种方法，一种是在视图类的constructor中设置skinName，还有一种就是在default.thm.json直接绑定。
    我们一般都是直接用第二种。

    在efault.thm.json的"skins": {}中绑定，键为视图类，值为视图类对应的皮肤的路径。
    举个栗子：
    ```
        "skins": {
            "game.XXXView": "resource/skins/modules/XXX/XXXSkin.exml",
            .......
        }
    ```


##### 4. 创建中介类	

    在src\game\modules\XXX\mediator下新建XXXMediator.ts类，即为中介类。

    中介类和视图类一样，分为模块中介类和普通中介类。

    模块中介类不仅需要继承`MediatorBase`，还需要继承模块中介类接口`IModuleMediator`

    普通中介类只需要继承`MediatorBase`，`MediatorBase`需要一个泛型，指定该中介类对应的视图类。

    举个栗子：
    ```
        //主界面中介类（模块中介类）
        export class MainUIMediator extends MediatorBase<MainUIView> implements IModuleMediator {}
        //主界面顶部界面中介类（普通中介类）
        export class MainUITopMediator extends MediatorBase<MainUITopView> {}
    ```

##### 5. 绑定视图类和中介类
      
      在initView.ts中进行绑定。

      绑定分为普通视图绑定和模块视图绑定。
      普通视图绑定使用 `registerMediator(XXXView, XXXMediator);`
      模块视图绑定使用 `registerModuleMediator(ModuleID.xxx, XXXView, XXXMediator);`
      
      创建一个模块还需要定义模块ID，在ModuleID.ts中添加。

      举个栗子
      ```
        //模块视图绑定
        registerModuleMediator(ModuleID.mainUI, MainUIView, MainUIMediator);
        //普通视图绑定
        registerMediator(MainUITopView, MainUITopMediator);
      ```

##### 6. 创建代理类

    并不是所有的模块都需要代理类，按需求判断是否创建代理类。

    在src\game\modules\XXX\proxy下新建XXXProxy.ts类，即为代理类。
    代理类需要继承代理基类，`XXXProxy extends ProxyBase{}`。

    代理类用来处理与服务器之间的协议。
    创建一个代理类还需要定义代理类ID，ProxyID.ts中添加定义,并在InitModel.ts中进行初始化。

##### 7. 创建事件类

    在src\game\modules\XXX\event下新建XXXEvent.ts类，即为事件类。
    一个模块只需要一个事件类。
    事件类主要定义派发事件的类型。

    栗子:
    ```
        export const enum MainUIEvent {
            /** 点击角色 */
            clickRole,
            /** 点击包裹 */
            clickBag,
        }
    ```
    

